---
import Layout from '../layouts/Layout.astro';
---

<Layout title="Animation Tests - Quarterly Systems">
	<nav class="bg-white border-b border-gray-200">
		<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
			<div class="flex justify-between items-center h-16">
				<div class="flex items-center">
					<a href="/" class="text-xl font-bold text-gray-900">Quarterly Systems</a>
					<span class="ml-4 text-sm text-gray-500">Animation Lab</span>
				</div>
			</div>
		</div>
	</nav>

	<main class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
		<!-- Hero Animation Test -->
		<section class="text-center mb-20">
			<h1 class="text-6xl font-bold text-gray-900 mb-6 hero-title">
				<span class="char">A</span><span class="char">n</span><span class="char">i</span><span class="char">m</span><span class="char">a</span><span class="char">t</span><span class="char">i</span><span class="char">o</span><span class="char">n</span>
				<br>
				<span class="char">L</span><span class="char">a</span><span class="char">b</span><span class="char">o</span><span class="char">r</span><span class="char">a</span><span class="char">t</span><span class="char">o</span><span class="char">r</span><span class="char">y</span>
			</h1>
			<p class="text-xl text-gray-600 subtitle opacity-0">
				Testing next-level animations for the Quarterly Systems platform
			</p>
			<div class="mt-8">
				<button class="bg-purple-600 text-white px-8 py-4 rounded-lg hover:bg-purple-700 transition-colors cta-button transform scale-0">
					Start Animation
				</button>
			</div>
		</section>

		<!-- Card Grid Animation Test -->
		<section class="mb-20">
			<h2 class="text-3xl font-bold text-gray-900 mb-8 section-title opacity-0">Feature Cards</h2>
			<div class="grid grid-cols-1 md:grid-cols-3 gap-8">
				<div class="feature-card bg-white p-8 rounded-2xl shadow-sm border border-gray-200 transform translate-y-20 opacity-0">
					<div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mb-4 card-icon">
						<svg class="w-6 h-6 text-purple-600" fill="currentColor" viewBox="0 0 20 20">
							<path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
						</svg>
					</div>
					<h3 class="text-xl font-semibold text-gray-900 mb-2">Smooth Transitions</h3>
					<p class="text-gray-600">Elegant animations that enhance user experience without overwhelming the interface.</p>
				</div>

				<div class="feature-card bg-white p-8 rounded-2xl shadow-sm border border-gray-200 transform translate-y-20 opacity-0">
					<div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-4 card-icon">
						<svg class="w-6 h-6 text-blue-600" fill="currentColor" viewBox="0 0 20 20">
							<path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"></path>
						</svg>
					</div>
					<h3 class="text-xl font-semibold text-gray-900 mb-2">Interactive Elements</h3>
					<p class="text-gray-600">Hover effects and micro-interactions that provide immediate visual feedback.</p>
				</div>

				<div class="feature-card bg-white p-8 rounded-2xl shadow-sm border border-gray-200 transform translate-y-20 opacity-0">
					<div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mb-4 card-icon">
						<svg class="w-6 h-6 text-green-600" fill="currentColor" viewBox="0 0 20 20">
							<path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd"></path>
						</svg>
					</div>
					<h3 class="text-xl font-semibold text-gray-900 mb-2">Performance Optimized</h3>
					<p class="text-gray-600">Hardware-accelerated animations that maintain 60fps across all devices.</p>
				</div>
			</div>
		</section>

		<!-- SVG Line Drawing Animation -->
		<section class="mb-20">
			<h2 class="text-3xl font-bold text-gray-900 mb-8 text-center">SVG Line Drawing</h2>
			<div class="flex justify-center">
				<svg width="600" height="300" viewBox="0 0 600 300" class="border border-gray-200 rounded-lg bg-black">
					<!-- Circuit board style paths -->
					<path id="circuit-path-1" d="M50 150 L150 150 L150 100 L250 100 L250 50 L350 50 L350 150 L450 150 L450 200 L550 200"
						stroke="#00ff88" stroke-width="3" fill="none" stroke-dasharray="2000" stroke-dashoffset="2000"/>

					<path id="circuit-path-2" d="M50 200 L100 200 L100 250 L200 250 L200 200 L300 200 L300 150 L400 150 L400 100 L500 100 L500 150 L550 150"
						stroke="#ff0088" stroke-width="3" fill="none" stroke-dasharray="2000" stroke-dashoffset="2000"/>

					<path id="circuit-path-3" d="M50 100 L120 100 L120 180 L180 180 L180 120 L260 120 L260 180 L320 180 L320 100 L400 100 L400 180 L480 180 L480 120 L550 120"
						stroke="#0088ff" stroke-width="3" fill="none" stroke-dasharray="2000" stroke-dashoffset="2000"/>

					<!-- Circuit nodes -->
					<circle class="circuit-node" cx="150" cy="150" r="4" fill="#00ff88" opacity="0"/>
					<circle class="circuit-node" cx="250" cy="100" r="4" fill="#00ff88" opacity="0"/>
					<circle class="circuit-node" cx="350" cy="50" r="4" fill="#00ff88" opacity="0"/>
					<circle class="circuit-node" cx="450" cy="150" r="4" fill="#00ff88" opacity="0"/>

					<circle class="circuit-node" cx="200" cy="250" r="4" fill="#ff0088" opacity="0"/>
					<circle class="circuit-node" cx="300" cy="200" r="4" fill="#ff0088" opacity="0"/>
					<circle class="circuit-node" cx="400" cy="150" r="4" fill="#ff0088" opacity="0"/>
					<circle class="circuit-node" cx="500" cy="100" r="4" fill="#ff0088" opacity="0"/>

					<!-- Data packets -->
					<circle class="data-packet" cx="50" cy="150" r="3" fill="#ffffff" opacity="0"/>
					<circle class="data-packet" cx="50" cy="200" r="3" fill="#ffffff" opacity="0"/>
					<circle class="data-packet" cx="50" cy="100" r="3" fill="#ffffff" opacity="0"/>
				</svg>
			</div>
		</section>

		<!-- Motion Path Animation -->
		<section class="mb-20">
			<h2 class="text-3xl font-bold text-gray-900 mb-8 text-center">Motion Path Animation</h2>
			<div class="flex justify-center">
				<svg width="600" height="400" viewBox="0 0 600 400" class="border border-gray-200 rounded-lg bg-gradient-to-br from-purple-900 to-blue-900">
					<!-- Track path -->
					<path id="race-track" d="M100 200 Q150 100 300 150 Q450 200 500 120 Q550 200 450 280 Q300 320 150 280 Q50 200 100 200 Z"
						stroke="rgba(255,255,255,0.3)" stroke-width="40" fill="none" stroke-dasharray="10 5"/>

					<!-- Racing car -->
					<g id="race-car" transform="translate(100, 200)">
						<rect x="-15" y="-8" width="30" height="16" rx="3" fill="#ff4444"/>
						<rect x="-10" y="-6" width="20" height="12" rx="2" fill="#ffaa00"/>
						<circle cx="-8" cy="-10" r="3" fill="#333"/>
						<circle cx="8" cy="-10" r="3" fill="#333"/>
						<circle cx="-8" cy="10" r="3" fill="#333"/>
						<circle cx="8" cy="10" r="3" fill="#333"/>
						<!-- Exhaust particles -->
						<circle class="exhaust" cx="-20" cy="0" r="2" fill="#ff6600" opacity="0"/>
						<circle class="exhaust" cx="-25" cy="2" r="1.5" fill="#ff8800" opacity="0"/>
						<circle class="exhaust" cx="-30" cy="-1" r="1" fill="#ffaa00" opacity="0"/>
					</g>
				</svg>
			</div>
		</section>

		<!-- Particle System -->
		<section class="mb-20">
			<h2 class="text-3xl font-bold text-gray-900 mb-8 text-center">Particle System</h2>
			<div class="flex justify-center">
				<div class="particle-container w-full h-96 bg-black rounded-lg relative overflow-hidden">
					<!-- Particles will be generated here -->
				</div>
			</div>
		</section>

		<!-- Draggable Spring Physics -->
		<section class="mb-20">
			<h2 class="text-3xl font-bold text-gray-900 mb-8 text-center">Spring Physics</h2>
			<div class="flex justify-center">
				<div class="spring-demo w-full h-96 bg-gradient-to-br from-gray-800 to-gray-900 rounded-lg relative overflow-hidden">
					<div class="draggable-orb absolute w-20 h-20 bg-gradient-to-br from-cyan-400 to-blue-500 rounded-full shadow-lg cursor-grab active:cursor-grabbing"
						style="left: 50%; top: 50%; transform: translate(-50%, -50%);">
						<div class="absolute inset-2 bg-white rounded-full opacity-30"></div>
					</div>
					<div class="absolute bottom-4 left-4 text-white text-sm opacity-70">
						Drag the orb and release to see spring physics
					</div>
				</div>
			</div>
		</section>

		<!-- Text Animation Showcase -->
		<section class="mb-20">
			<h2 class="text-3xl font-bold text-gray-900 mb-8 text-center">Text Effects</h2>
			<div class="text-center">
				<p class="text-2xl text-gray-700 mb-4 typewriter-text">
					<span class="typewriter-char">T</span><span class="typewriter-char">r</span><span class="typewriter-char">a</span><span class="typewriter-char">n</span><span class="typewriter-char">s</span><span class="typewriter-char">f</span><span class="typewriter-char">o</span><span class="typewriter-char">r</span><span class="typewriter-char">m</span>
					<span class="typewriter-char"> </span>
					<span class="typewriter-char">I</span><span class="typewriter-char">d</span><span class="typewriter-char">e</span><span class="typewriter-char">a</span><span class="typewriter-char">s</span>
					<span class="typewriter-char"> </span>
					<span class="typewriter-char">I</span><span class="typewriter-char">n</span><span class="typewriter-char">t</span><span class="typewriter-char">o</span>
					<span class="typewriter-char"> </span>
					<span class="typewriter-char">O</span><span class="typewriter-char">p</span><span class="typewriter-char">e</span><span class="typewriter-char">r</span><span class="typewriter-char">a</span><span class="typewriter-char">t</span><span class="typewriter-char">i</span><span class="typewriter-char">o</span><span class="typewriter-char">n</span><span class="typewriter-char">a</span><span class="typewriter-char">l</span>
					<span class="typewriter-char"> </span>
					<span class="typewriter-char">S</span><span class="typewriter-char">y</span><span class="typewriter-char">s</span><span class="typewriter-char">t</span><span class="typewriter-char">e</span><span class="typewriter-char">m</span><span class="typewriter-char">s</span>
				</p>
				<div class="bounce-text text-4xl font-bold text-purple-600 opacity-0">
					<span class="bounce-char">✨</span> <span class="bounce-char">A</span><span class="bounce-char">n</span><span class="bounce-char">i</span><span class="bounce-char">m</span><span class="bounce-char">a</span><span class="bounce-char">t</span><span class="bounce-char">e</span><span class="bounce-char">d</span> <span class="bounce-char">✨</span>
				</div>
			</div>
		</section>

		<!-- Control Panel -->
		<section class="bg-gray-50 rounded-2xl p-8">
			<h2 class="text-2xl font-bold text-gray-900 mb-6 text-center">Animation Controls</h2>
			<div class="flex flex-wrap justify-center gap-4">
				<button onclick="playHeroAnimation()" class="bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition-colors">
					Hero Animation
				</button>
				<button onclick="playCardAnimation()" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors">
					Card Reveal
				</button>
				<button onclick="playLineDrawing()" class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors">
					SVG Line Drawing
				</button>
				<button onclick="playMotionPath()" class="bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors">
					Motion Path
				</button>
				<button onclick="createParticleSystem()" class="bg-yellow-600 text-white px-6 py-3 rounded-lg hover:bg-yellow-700 transition-colors">
					Particle System
				</button>
				<button onclick="playTypewriterAnimation()" class="bg-orange-600 text-white px-6 py-3 rounded-lg hover:bg-orange-700 transition-colors">
					Typewriter Effect
				</button>
				<button onclick="playBounceAnimation()" class="bg-pink-600 text-white px-6 py-3 rounded-lg hover:bg-pink-700 transition-colors">
					Bounce Text
				</button>
				<button onclick="resetAllAnimations()" class="bg-gray-600 text-white px-6 py-3 rounded-lg hover:bg-gray-700 transition-colors">
					Reset All
				</button>
			</div>
		</section>
	</main>
</Layout>

<script>
	import { animate, createTimeline, set, remove, easings, createMotionPath, createDraggable, createSpring } from 'animejs';

	// Hero Animation
	function playHeroAnimation() {
		const timeline = createTimeline();

		timeline
			.add(animate('.hero-title .char', {
				translateY: [-100, 0],
				opacity: [0, 1],
				easing: easings.outExpo,
				duration: 1200,
				delay: (el, i) => 50 * i
			}))
			.add(animate('.subtitle', {
				opacity: [0, 1],
				translateY: [30, 0],
				easing: easings.outQuad,
				duration: 800
			}), 600)
			.add(animate('.cta-button', {
				scale: [0, 1],
				easing: easings.outElastic,
				duration: 1200
			}), 800);
	}

	// Card Animation
	function playCardAnimation() {
		const timeline = createTimeline();

		timeline
			.add(animate('.section-title', {
				opacity: [0, 1],
				translateY: [30, 0],
				easing: easings.outQuad,
				duration: 600
			}))
			.add(animate('.feature-card', {
				translateY: [80, 0],
				opacity: [0, 1],
				easing: easings.outExpo,
				duration: 1000,
				delay: (el, i) => 200 * i
			}), 300)
			.add(animate('.card-icon', {
				rotateY: [90, 0],
				easing: easings.outBack,
				duration: 800,
				delay: (el, i) => 100 * i
			}), 500);
	}

	// SVG Line Drawing Animation
	function playLineDrawing() {
		const timeline = createTimeline();

		// Draw circuit paths
		timeline
			.add(animate('#circuit-path-1', {
				strokeDashoffset: [2000, 0],
				easing: easings.outExpo,
				duration: 2000
			}))
			.add(animate('#circuit-path-2', {
				strokeDashoffset: [2000, 0],
				easing: easings.outExpo,
				duration: 2000
			}), 500)
			.add(animate('#circuit-path-3', {
				strokeDashoffset: [2000, 0],
				easing: easings.outExpo,
				duration: 2000
			}), 1000);

		// Animate circuit nodes
		setTimeout(() => {
			animate('.circuit-node', {
				opacity: [0, 1],
				scale: [0, 1.5, 1],
				easing: easings.outElastic,
				duration: 800,
				delay: (el, i) => 100 * i
			});
		}, 1500);

		// Animate data packets
		setTimeout(() => {
			animate('.data-packet', {
				opacity: [0, 1, 0],
				scale: [0, 1, 0],
				easing: easings.inOutQuad,
				duration: 1000,
				delay: (el, i) => 300 * i,
				loop: true
			});
		}, 3000);
	}

	// Motion Path Animation
	function playMotionPath() {
		const motionPath = createMotionPath('#race-track');

		animate('#race-car', {
			motionPath: {
				path: motionPath,
				autoRotate: true
			},
			duration: 8000,
			easing: easings.inOutCubic,
			loop: true
		});

		// Animate exhaust particles
		animate('.exhaust', {
			opacity: [0, 0.8, 0],
			scale: [0.5, 1, 1.5],
			translateX: [-5, -15],
			translateY: () => (Math.random() - 0.5) * 10,
			easing: easings.outQuart,
			duration: 500,
			delay: (el, i) => i * 100,
			loop: true
		});
	}

	// Particle System
	function createParticleSystem() {
		const container = document.querySelector('.particle-container');
		if (!container) return;

		// Clear existing particles
		container.innerHTML = '';

		// Create 100 particles
		for (let i = 0; i < 100; i++) {
			const particle = document.createElement('div');
			particle.className = 'particle absolute rounded-full pointer-events-none';
			particle.style.width = Math.random() * 4 + 2 + 'px';
			particle.style.height = particle.style.width;
			particle.style.left = Math.random() * 100 + '%';
			particle.style.top = Math.random() * 100 + '%';

			// Random colors
			const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57', '#ff9ff3', '#54a0ff'];
			particle.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];

			container.appendChild(particle);
		}

		// Animate particles
		animate('.particle', {
			translateX: () => (Math.random() - 0.5) * 400,
			translateY: () => (Math.random() - 0.5) * 400,
			scale: [0, 1, 0],
			opacity: [0, 1, 0],
			rotate: () => Math.random() * 360,
			easing: easings.outQuart,
			duration: () => Math.random() * 3000 + 2000,
			delay: (el, i) => i * 50,
			loop: true
		});
	}

	// Spring Physics
	function initSpringPhysics() {
		const orb = document.querySelector('.draggable-orb');
		if (!orb) return;

		const spring = createSpring({
			mass: 1,
			stiffness: 100,
			damping: 10
		});

		createDraggable(orb, {
			onDrag: (x, y) => {
				set(orb, {
					translateX: x,
					translateY: y
				});
			},
			onRelease: (x, y, velocityX, velocityY) => {
				// Spring back to center with physics
				animate(orb, {
					translateX: 0,
					translateY: 0,
					easing: spring,
					duration: 2000
				});

				// Add ripple effect
				createRippleEffect(x, y);
			}
		});
	}

	function createRippleEffect(x, y) {
		const container = document.querySelector('.spring-demo');
		const ripple = document.createElement('div');
		ripple.className = 'absolute rounded-full border-2 border-cyan-400 pointer-events-none';
		ripple.style.left = x + 'px';
		ripple.style.top = y + 'px';
		ripple.style.width = '20px';
		ripple.style.height = '20px';
		ripple.style.transform = 'translate(-50%, -50%)';
		container.appendChild(ripple);

		animate(ripple, {
			scale: [0, 4],
			opacity: [0.8, 0],
			easing: easings.outQuart,
			duration: 1000,
			complete: () => ripple.remove()
		});
	}

	// Typewriter Animation
	function playTypewriterAnimation() {
		animate('.typewriter-char', {
			opacity: [0, 1],
			translateY: [20, 0],
			easing: easings.outQuad,
			duration: 50,
			delay: (el, i) => 100 * i
		});
	}

	// Bounce Animation
	function playBounceAnimation() {
		const timeline = createTimeline();

		timeline
			.add(animate('.bounce-text', {
				opacity: [0, 1],
				scale: [0.5, 1],
				easing: easings.outElastic,
				duration: 1000
			}))
			.add(animate('.bounce-char', {
				translateY: [0, -20, 0],
				easing: easings.inOutQuad,
				duration: 600,
				delay: (el, i) => 100 * i
			}), 500);
	}

	// Reset function
	function resetAllAnimations() {
		// Reset all elements to initial state
		set('.hero-title .char', { translateY: 0, opacity: 1 });
		set('.subtitle', { opacity: 0, translateY: 30 });
		set('.cta-button', { scale: 0 });
		set('.section-title', { opacity: 0, translateY: 30 });
		set('.feature-card', { translateY: 80, opacity: 0 });
		set('.card-icon', { rotateY: 0 });
		set('.morph-shape', { borderRadius: '50%', rotate: 0, scale: 1 });
		set('.typewriter-char', { opacity: 0, translateY: 20 });
		set('.bounce-text', { opacity: 0, scale: 0.5 });
		set('.bounce-char', { translateY: 0 });
	}

	// Make functions global for onclick handlers
	window.playHeroAnimation = playHeroAnimation;
	window.playCardAnimation = playCardAnimation;
	window.playLineDrawing = playLineDrawing;
	window.playMotionPath = playMotionPath;
	window.createParticleSystem = createParticleSystem;
	window.playTypewriterAnimation = playTypewriterAnimation;
	window.playBounceAnimation = playBounceAnimation;
	window.resetAllAnimations = resetAllAnimations;

	// Auto-play initial animation on page load
	document.addEventListener('DOMContentLoaded', function() {
		setTimeout(() => {
			playHeroAnimation();
		}, 500);

		// Initialize spring physics
		setTimeout(() => {
			initSpringPhysics();
		}, 1000);

		// Create initial particle system
		setTimeout(() => {
			createParticleSystem();
		}, 2000);
	});
</script>

<style>
	/* Reset initial states for animations */
	.hero-title .char {
		display: inline-block;
		transform: translateY(-100px);
		opacity: 0;
	}

	.subtitle {
		opacity: 0;
		transform: translateY(30px);
	}

	.cta-button {
		transform: scale(0);
	}

	.section-title {
		opacity: 0;
		transform: translateY(30px);
	}

	.feature-card {
		transform: translateY(80px);
		opacity: 0;
		transition: transform 0.3s ease, box-shadow 0.3s ease;
	}

	.feature-card:hover {
		transform: translateY(-5px);
		box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
	}

	.card-icon {
		transition: transform 0.3s ease;
	}

	.feature-card:hover .card-icon {
		transform: scale(1.1) rotateY(10deg);
	}

	.morph-shape {
		transition: all 0.3s ease;
		cursor: pointer;
	}

	.morph-shape:hover {
		transform: scale(1.1);
	}

	.typewriter-char {
		display: inline-block;
		opacity: 0;
		transform: translateY(20px);
	}

	.bounce-text {
		opacity: 0;
		transform: scale(0.5);
	}

	.bounce-char {
		display: inline-block;
	}

	/* Additional hover effects */
	button {
		transition: all 0.3s ease;
		position: relative;
		overflow: hidden;
	}

	button:hover {
		transform: translateY(-2px);
		box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
	}

	button:active {
		transform: translateY(0);
	}
</style>